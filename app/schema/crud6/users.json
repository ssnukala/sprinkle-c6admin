{
    "model": "users",
    "title": "CRUD6.USER.PAGE",
    "singular_title": "CRUD6.USER.1",
    "title_field": "user_name",
    "description": "CRUD6.USER.PAGE_DESCRIPTION",
    "table": "users",
    "primary_key": "id",
    "permissions": {
        "read": "uri_users",
        "create": "create_user",
        "update": "update_user_field",
        "delete": "delete_user"
    },
    "default_sort": {
        "user_name": "asc"
    },
    "relationships": [
        {
            "name": "roles",
            "type": "many_to_many",
            "pivot_table": "role_users",
            "foreign_key": "user_id",
            "related_key": "role_id",
            "title": "CRUD6.ROLE.2",
            "actions": {
                "on_create": {
                    "attach": [
                        {
                            "related_id": 1,
                            "description": "Assign default role to new users",
                            "pivot_data": {
                                "created_at": "now",
                                "updated_at": "now"
                            }
                        }
                    ]
                },
                "on_update": {
                    "sync": "role_ids",
                    "description": "Sync user roles from form input"
                },
                "on_delete": {
                    "detach": "all",
                    "description": "Remove all role associations when user is deleted"
                }
            }
        },
        {
            "name": "permissions",
            "type": "belongs_to_many_through",
            "through": "roles",
            "first_pivot_table": "role_users",
            "first_foreign_key": "user_id",
            "first_related_key": "role_id",
            "second_pivot_table": "permission_roles",
            "second_foreign_key": "role_id",
            "second_related_key": "permission_id",
            "title": "CRUD6.PERMISSION.2"
        }
    ],
    "details": [
        {
            "model": "activities",
            "foreign_key": "user_id",
            "list_fields": [
                "occurred_at",
                "type",
                "description",
                "ip_address"
            ],
            "title": "CRUD6.ACTIVITY.2"
        },
        {
            "model": "roles",
            "list_fields": [
                "name",
                "slug",
                "description"
            ],
            "title": "CRUD6.ROLE.2"
        },
        {
            "model": "permissions",
            "list_fields": [
                "slug",
                "name",
                "description"
            ],
            "title": "CRUD6.PERMISSION.2"
        }
    ],
    "actions": [
        {
            "key": "toggle_enabled",
            "label": "CRUD6.USER.TOGGLE_ENABLED",
            "icon": "toggle-on",
            "type": "field_update",
            "field": "flag_enabled",
            "style": "warning",
            "confirm": "CRUD6.USER.TOGGLE_ENABLED_CONFIRM",
            "toggle": true,
            "permission": "update_user_field"
        },
        {
            "key": "toggle_verified",
            "label": "CRUD6.USER.TOGGLE_VERIFIED",
            "icon": "check-circle",
            "type": "field_update",
            "style": "primary",
            "field": "flag_verified",
            "confirm": "CRUD6.USER.TOGGLE_VERIFIED_CONFIRM",
            "toggle": true,
            "permission": "update_user_field"
        },
        {
            "key": "reset_password",
            "label": "CRUD6.USER.RESET_PASSWORD",
            "icon": "envelope",
            "type": "api_call",
            "method": "POST",
            "style": "secondary",
            "permission": "update_user_field",
            "confirm": "CRUD6.USER.ADMIN.PASSWORD_RESET_CONFIRM",
            "modal_config": {
                "type": "confirm"
            }
        },
        {
            "key": "password_action",
            "label": "CRUD6.USER.CHANGE_PASSWORD",
            "icon": "key",
            "type": "field_update",
            "field": "password",
            "style": "warning",
            "permission": "update_user_field",
            "confirm": "CRUD6.USER.ADMIN.PASSWORD_CHANGE_CONFIRM",
            "modal_config": {
                "type": "input",
                "fields": [
                    "password"
                ]
            }
        },
        {
            "key": "disable_user",
            "label": "CRUD6.USER.DISABLE_USER",
            "icon": "user-slash",
            "type": "field_update",
            "field": "flag_enabled",
            "value": false,
            "style": "danger",
            "permission": "update_user_field",
            "confirm": "CRUD6.USER.DISABLE_CONFIRM",
            "visible_when": {
                "flag_enabled": true
            },
            "modal_config": {
                "type": "confirm"
            }
        },
        {
            "key": "enable_user",
            "label": "CRUD6.USER.ENABLE_USER",
            "icon": "user-check",
            "type": "field_update",
            "field": "flag_enabled",
            "value": true,
            "style": "primary",
            "permission": "update_user_field",
            "confirm": "CRUD6.USER.ENABLE_CONFIRM",
            "visible_when": {
                "flag_enabled": false
            },
            "modal_config": {
                "type": "confirm"
            }
        }
    ],
    "sections": [
        {
            "key": "identity",
            "title": "CRUD6.USER.SECTION.IDENTITY",
            "icon": "user",
            "fields": ["user_name", "first_name", "last_name", "email"],
            "columns": 2
        },
        {
            "key": "settings",
            "title": "CRUD6.USER.SECTION.SETTINGS",
            "icon": "cog",
            "fields": ["locale", "group_id"],
            "columns": 2
        },
        {
            "key": "status",
            "title": "CRUD6.USER.SECTION.STATUS",
            "icon": "shield-halved",
            "fields": ["flag_verified", "flag_enabled"],
            "columns": 2
        },
        {
            "key": "roles",
            "title": "CRUD6.USER.SECTION.ROLES",
            "icon": "users",
            "fields": ["role_ids"],
            "columns": 1
        },
        {
            "key": "security",
            "title": "CRUD6.USER.SECTION.SECURITY",
            "icon": "lock",
            "fields": ["password"],
            "columns": 1
        }
    ],
    "fields": {
        "id": {
            "type": "integer",
            "label": "CRUD6.USER.ID",
            "auto_increment": true,
            "readonly": true,
            "show_in": [
                "detail"
            ]
        },
        "user_name": {
            "type": "string",
            "label": "CRUD6.USER.USERNAME",
            "required": true,
            "sortable": true,
            "filterable": true,
            "show_in": [
                "list",
                "form",
                "detail"
            ],
            "validation": {
                "required": true,
                "unique": true,
                "length": {
                    "min": 1,
                    "max": 50
                },
                "username": true,
                "no_leading_whitespace": true,
                "no_trailing_whitespace": true
            }
        },
        "first_name": {
            "type": "string",
            "label": "CRUD6.USER.FIRST_NAME",
            "required": true,
            "sortable": true,
            "filterable": true,
            "show_in": [
                "list",
                "form",
                "detail"
            ],
            "validation": {
                "required": true,
                "length": {
                    "min": 1,
                    "max": 20
                },
                "no_leading_whitespace": true,
                "no_trailing_whitespace": true
            }
        },
        "last_name": {
            "type": "string",
            "label": "CRUD6.USER.LAST_NAME",
            "required": true,
            "sortable": true,
            "filterable": true,
            "show_in": [
                "list",
                "form",
                "detail"
            ],
            "validation": {
                "required": true,
                "length": {
                    "min": 1,
                    "max": 30
                },
                "no_leading_whitespace": true,
                "no_trailing_whitespace": true
            }
        },
        "email": {
            "type": "email",
            "label": "CRUD6.USER.EMAIL",
            "required": true,
            "sortable": true,
            "filterable": true,
            "show_in": [
                "list",
                "form",
                "detail"
            ],
            "validation": {
                "required": true,
                "email": true,
                "unique": true,
                "length": {
                    "max": 254
                },
                "no_leading_whitespace": true,
                "no_trailing_whitespace": true
            }
        },
        "locale": {
            "type": "select",
            "label": "CRUD6.USER.LOCALE",
            "required": false,
            "show_in": [
                "form",
                "detail"
            ],
            "default": "en_US",
            "options": [
                { "value": "en_US", "label": "English (US)" },
                { "value": "fr_FR", "label": "French" },
                { "value": "de_DE", "label": "German" },
                { "value": "es_ES", "label": "Spanish" },
                { "value": "it_IT", "label": "Italian" },
                { "value": "pt_BR", "label": "Portuguese (Brazil)" },
                { "value": "zh_CN", "label": "Chinese (Simplified)" },
                { "value": "ja_JP", "label": "Japanese" },
                { "value": "ko_KR", "label": "Korean" },
                { "value": "ru_RU", "label": "Russian" },
                { "value": "ar_SA", "label": "Arabic" },
                { "value": "hi_IN", "label": "Hindi" },
                { "value": "th_TH", "label": "Thai" },
                { "value": "tr_TR", "label": "Turkish" }
            ],
            "validation": {
                "length": {
                    "max": 10
                }
            }
        },
        "group_id": {
            "type": "integer",
            "label": "CRUD6.USER.GROUP",
            "required": false,
            "default": 1,
            "show_in": [
                "form",
                "detail"
            ]
        },
        "last_activity_id": {
            "type": "integer",
            "label": "CRUD6.USER.LAST_ACTIVITY_ID",
            "required": false,
            "default": null,
            "show_in": [
                "detail"
            ]
        },
        "flag_verified": {
            "type": "boolean",
            "ui": "toggle",
            "label": "CRUD6.USER.VERIFIED",
            "description": "Email verification status",
            "default": true,
            "sortable": true,
            "filterable": true,
            "show_in": [
                "list",
                "form",
                "detail"
            ],
            "display": {
                "true_label": "Verified",
                "false_label": "Unverified",
                "true_style": "success",
                "false_style": "warning"
            }
        },
        "flag_enabled": {
            "type": "boolean",
            "ui": "toggle",
            "label": "CRUD6.USER.ENABLED",
            "description": "Account enabled status",
            "default": true,
            "sortable": true,
            "filterable": true,
            "show_in": [
                "list",
                "form",
                "detail"
            ],
            "display": {
                "true_label": "Active",
                "false_label": "Disabled",
                "true_style": "success",
                "false_style": "danger"
            }
        },
        "role_ids": {
            "type": "multiselect",
            "label": "CRUD6.USER.ROLES",
            "description": "User roles (used for sync on update)",
            "computed": true,
            "lookup": {
                "model": "roles",
                "id": "id",
                "desc": "name"
            },
            "required": false,
            "show_in": [
                "form"
            ]
        },
        "password": {
            "type": "password",
            "label": "CRUD6.USER.PASSWORD",
            "required": true,
            "show_in": [
                "create",
                "edit"
            ],
            "validation": {
                "required": true,
                "length": {
                    "min": 8,
                    "max": 255
                },
                "match": true
            }
        },
        "deleted_at": {
            "type": "datetime",
            "label": "CRUD6.USER.DELETED_AT",
            "readonly": true,
            "show_in": [],
            "date_format": "Y-m-d H:i:s"
        },
        "created_at": {
            "type": "datetime",
            "label": "CRUD6.USER.CREATED_AT",
            "readonly": true,
            "show_in": [
                "detail"
            ],
            "date_format": "Y-m-d H:i:s"
        },
        "updated_at": {
            "type": "datetime",
            "label": "CRUD6.USER.UPDATED_AT",
            "readonly": true,
            "show_in": [
                "detail"
            ],
            "date_format": "Y-m-d H:i:s"
        }
    }
}